/*
popModal - 1.23 [11.04.16]
Author: vadimsva
Github: https://github.com/vadimsva/popModal
*/
$(function(){(function(a){a.fn.popModal=function(b){function g(){function c(a){var d=Math.max(u,v,w);return("bottomLeft"==a?0<v:"bottomRight"==a?0<u:0<w)?a:0<v&&v==d?"bottomLeft":0<u&&u==d?"bottomRight":0<w&&w==d?"bottomCenter":a}if(f.inline)var b=e.position().left,h=e.position().top;else b=e.offset().left,h=e.offset().top;var n=parseInt(e.css("marginLeft"));parseInt(e.css("paddingLeft"));var g=parseInt(e.css("marginTop")),r=e.outerHeight(),k=e.outerWidth(),l=d.outerWidth(),p=d.outerHeight(),q,m=
e.offset().left,y=a(window).width()-e.offset().left-k,A=e.offset().top,B=m-10-l,u=k+m-l,C=y-10-l,v=k+y-l,w=Math.min(k/2+y-l/2,k/2+m-l/2),m=A-p/2;/^bottom/.test(f.placement)?q=c(f.placement):/^left/.test(f.placement)?q=0<B?"leftCenter"==f.placement&&0<m?"leftCenter":"leftTop":c("bottomLeft"):/^right/.test(f.placement)&&(q=0<C?"rightCenter"==f.placement&&0<m?"rightCenter":"rightTop":c("bottomRight"));d.removeAttr("class").addClass("popModal animated "+q);switch(q){case "bottomLeft":d.css({top:h+g+r+
10+"px",left:b+n+"px"}).addClass("fadeInBottom");break;case "bottomRight":d.css({top:h+g+r+10+"px",left:b+n+k-l+"px"}).addClass("fadeInBottom");break;case "bottomCenter":d.css({top:h+g+r+10+"px",left:b+n+(k-l)/2+"px"}).addClass("fadeInBottom");break;case "leftTop":d.css({top:h+g+"px",left:b+n-l-10+"px"}).addClass("fadeInLeft");break;case "rightTop":d.css({top:h+g+"px",left:b+n+k+10+"px"}).addClass("fadeInRight");break;case "leftCenter":d.css({top:h+g+r/2-p/2+"px",left:b+n-l-10+"px"}).addClass("fadeInLeft");
break;case "rightCenter":d.css({top:h+g+r/2-p/2+"px",left:b+n+k+10+"px"}).addClass("fadeInRight")}}function h(){d=a(".popModal");d.length&&(c(),l||(l=d.css("animationDuration"),l=void 0!==l?1E3*l.replace("s",""):0),setTimeout(function(){a(".popModal_source").replaceWith(a(".popModal_content").children());d.remove();a("html.popModalOpen").off(".popModalEvent").removeClass("popModalOpen")},l))}function c(){var a=d.attr("class"),c=a.replace("fadeIn","fadeOut");d.removeClass(a).addClass(c)}var e=a(this),
d,k="",n="",r="",p,f,l,m,q={init:function(c){f=a.extend({html:"",placement:"bottomLeft",showCloseBut:!0,onDocumentClickClose:!0,onDocumentClickClosePrevent:"",overflowContent:!1,inline:!0,asMenu:!1,beforeLoadingContent:"Please, wait...",onOkBut:function(){return!0},onCancelBut:function(){},onLoad:function(){},onClose:function(){}},c);if(0!==a("body").find(".popModal").length&&a("body").find(".popModal").attr("data-popmodal_id")==e.attr("data-popmodal_id"))h();else{a("html.popModalOpen").off(".popModalEvent").removeClass("popModalOpen");
a(".popModal_source").replaceWith(a(".popModal_content").children());a(".popModal").remove();"fixed"==e.css("position")&&(k="position:fixed;");f.asMenu?p=" popModal_asMenu":(p="",f.showCloseBut&&(n=a('<button type="button" class="close">&times;</button>')),r=f.overflowContent?" popModal_contentOverflow":"");m=(new Date).getMilliseconds();e.attr("data-popmodal_id",m);c=a('<div class="popModal animated" style="'+k+'" data-popmodal_id="'+m+'"></div>');var b=a('<div class="popModal_content'+r+p+'"></div>');
c.append(n,b);a.isFunction(f.html)?(b.append(f.beforeLoadingContent),f.html(function(c){b.empty().append(c);d=a(".popModal");g()})):("object"==a.type(f.html)&&f.html.after(a('<div class="popModal_source"></div>')),b.append(f.html));500>=a(window).width()&&(f.inline=!0);f.inline?e.after(c):a("body").append(c);d=a(".popModal");c=d.find(".popModal_footer");0!=c.length&&d.find(".popModal_content").css({marginBottom:c.outerHeight()+15+"px"});a.isFunction(f.html)||a.type(f.html);if(f.onLoad&&a.isFunction(f.onLoad))f.onLoad();
a(f.html).trigger("load");d.on("destroyed",function(){if(f.onClose&&a.isFunction(f.onClose))f.onClose();a(f.html).trigger("close")});g();if(f.onDocumentClickClose)a("html").on("click.popModalEvent",function(c){a(this).addClass("popModalOpen");d.is(":hidden")&&h();var b=a(c.target);b.parents().addBack().is(".popModal")||b.parents().addBack().is(e)||(c=parseInt(b.parents().filter(function(){return"auto"!==a(this).css("zIndex")}).first().css("zIndex")),isNaN(c)&&(c=0),""!==f.onDocumentClickClosePrevent&&
b.is(f.onDocumentClickClosePrevent)&&(c=9999),b=b.css("zIndex"),"auto"==b&&(b=0),c<b&&(c=b),c<=d.css("zIndex")&&h())});a(window).resize(function(){g()});d.find(".close").on("click",function(){h();a(this).off("click")});d.find('[data-popmodal-but="close"]').on("click",function(){h();a(this).off("click")});d.find('[data-popmodal-but="ok"]').on("click",function(c){var b;f.onOkBut&&a.isFunction(f.onOkBut)&&(b=f.onOkBut(c));!1!==b&&h();a(this).off("click");a(f.html).trigger("okbut")});d.find('[data-popmodal-but="cancel"]').on("click",
function(){if(f.onCancelBut&&a.isFunction(f.onCancelBut))f.onCancelBut();h();a(this).off("click");a(f.html).trigger("cancelbut")});a("html").on("keydown.popModalEvent",function(a){27==a.keyCode&&h()})}return d},hide:function(){h()}};if(q[b])return q[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return q.init.apply(this,arguments)};a("* [data-popmodal-bind]").bind("click",function(){var b=a(this).attr("data-popmodal-bind"),b={html:a(b)};void 0!==a(this).attr("data-placement")&&
(b.placement=a(this).attr("data-placement"));void 0!==a(this).attr("data-showclose-but")&&(b.showCloseBut=/^true$/i.test(a(this).attr("data-showclose-but")));void 0!==a(this).attr("data-overflowcontent")&&(b.overflowContent=/^false$/i.test(a(this).attr("data-overflowcontent")));void 0!==a(this).attr("data-ondocumentclick-close")&&(b.onDocumentClickClose=/^true$/i.test(a(this).attr("data-ondocumentclick-close")));void 0!==a(this).attr("data-ondocumentclick-close-prevent")&&(b.onDocumentClickClosePrevent=
a(this).attr("data-ondocumentclick-close-prevent"));void 0!==a(this).attr("data-inline")&&(b.inline=/^true$/i.test(a(this).attr("data-inline")));void 0!==a(this).attr("data-asmenu")&&(b.asMenu=/^false$/i.test(a(this).attr("data-asmenu")));void 0!==a(this).attr("data-beforeloading-content")&&(b.beforeLoadingContent=a(this).attr("data-beforeloading-content"));a(this).popModal(b)});a.event.special.destroyed={remove:function(a){a.handler&&a.handler()}}})(jQuery);(function(a){a.fn.notifyModal=function(b){function g(){var c=
a(".notifyModal");c.removeClass("open");setTimeout(function(){c.remove();-1!=d.duration&&clearTimeout(notifDur);if(d.onClose&&a.isFunction(d.onClose))d.onClose()},k)}var h=a(this),c,e="",d,k,n={init:function(b){d=a.extend({duration:2500,placement:"center",type:"notify",overlay:!0,onClose:function(){}},b);d.overlay&&(e="overlay");a(".notifyModal").remove();b=a('<div class="notifyModal '+d.placement+" "+e+" "+d.type+'"></div>');var n=a('<div class="notifyModal_content"></div>'),f=a('<button type="button" class="close">&times;</button>');
h=void 0===h[0]?h.selector:h[0].innerHTML;n.append(f,h);b.append(n);a("body").append(b);c=a(".notifyModal");k||(k=c.css("transitionDuration"),k=void 0!==k?1E3*k.replace("s",""):0);c.addClass("open");c.click(function(){g()});-1!=d.duration&&(notifDur=setTimeout(g,d.duration))},hide:function(){g()}};a("html").keydown(function(a){27==a.keyCode&&g()});if(n[b])return n[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return n.init.apply(this,arguments)};a("* [data-notifymodal-bind]").bind("click",
function(){var b=a(this).attr("data-notifymodal-bind"),g={};void 0!==a(this).attr("data-duration")&&(g.duration=parseInt(a(this).attr("data-duration")));void 0!==a(this).attr("data-placement")&&(g.placement=a(this).attr("data-placement"));void 0!==a(this).attr("data-ontop")&&(g.onTop=/^true$/i.test(a(this).attr("data-ontop")));a(b).notifyModal(g)})})(jQuery);(function(a){a.fn.hintModal=function(b){a(".hintModal").off();var g={init:function(){function b(c,e){var d,h=c.attr("class");d=c.outerWidth();
var n=e.outerWidth(),g=c.offset().left,p=a(window).width()-c.offset().left-d,f=d+g-n,l=d+p-n,m=Math.min(d/2+p-n/2,d/2+g-n/2);d=c.hasClass("bottomLeft")?"bottomLeft":c.hasClass("bottomCenter")?"bottomCenter":c.hasClass("bottomRight")?"bottomRight":"bottomLeft";void 0===c.data("placement")&&c.data("placement",d);c.removeAttr("class").addClass(h+" "+function(a){var c=Math.max(f,l,m);return("bottomLeft"==a?0<l:"bottomRight"==a?0<f:0<m)?a:0<l&&l==c?"bottomLeft":0<f&&f==c?"bottomRight":0<m&&m==c?"bottomCenter":
a}(c.data("placement")))}a(this).on("mouseenter",function(){var c=a(this).find("> .hintModal_container");1<c[0].textContent.length&&(c.addClass("animated fadeInBottom"),b(a(this),c))});a(this).on("mouseleave",function(){var c=a(this).find("> .hintModal_container");1<c[0].textContent.length&&c.removeClass("animated fadeInBottom")})}};if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return g.init.apply(this,arguments)};a(".hintModal").hintModal();document.addEventListener("DOMNodeInserted",
function(b){a(b.target).hasClass("hintModal")&&a(".hintModal").hintModal()},!1)})(jQuery);(function(a){a.fn.dialogModal=function(b){function g(){var c=a(".dialogModal");c.removeClass("open");setTimeout(function(){c.remove();a("body").removeClass("dialogModalOpen").css({paddingRight:""});a("html.dialogModalOpen").off(".dialogModalEvent").removeClass("dialogModalOpen");c.find(".dialogPrev").off("click");c.find(".dialogNext").off("click")},d)}var h=a(this),c,e,d,k={init:function(b){function k(){c.find('[data-dialogmodal-but="close"]').on("click",
function(){g();a(this).off("click")});c.find('[data-dialogmodal-but="ok"]').on("click",function(c){var b;e.onOkBut&&a.isFunction(e.onOkBut)&&(b=e.onOkBut(c));!1!==b&&g();a(this).off("click");h.trigger("okbut")});c.find('[data-dialogmodal-but="cancel"]').on("click",function(){if(e.onCancelBut&&a.isFunction(e.onCancelBut))e.onCancelBut();g();a(this).off("click");h.trigger("cancelbut")});c.find('[data-dialogmodal-but="prev"]').on("click",function(){c.find(".dialogPrev").click()});c.find('[data-dialogmodal-but="next"]').on("click",
function(){c.find(".dialogNext").click()})}function p(){x.empty().append(h[f].innerHTML);t.find("span").html(h.find(".dialogModal_header")[f].innerHTML);k();if(e.onChange&&a.isFunction(e.onChange))e.onChange(c,f+1);h.trigger("change",{el:c,current:f+1})}e=a.extend({topOffset:0,top:"10%",type:"",onOkBut:function(){return!0},onCancelBut:function(){},onLoad:function(){},onClose:function(){},onChange:function(){}},b);a("html.dialogModalOpen").off(".dialogModalEvent").removeClass("dialogModalOpen");a(".dialogModal .dialogPrev, .dialogModal .dialogNext").off("click");
a(".dialogModal").remove();e.top=""==e.type?0:"calc("+e.top+" + 60px)";var f=0,l=h.length-1;b=a('<div class="dialogModal '+e.type+'" style="top:'+e.topOffset+'px"></div>');var m=a('<div class="dialogModal_container" style="top:'+e.top+'"></div>'),q=a('<div class="dialogModal_top animated"></div>'),t=a('<div class="dialogModal_header"></div>'),x=a('<div class="dialogModal_body animated"></div>'),z=a('<button type="button" class="close">&times;</button>');b.append(m);m.append(q,x);q.append(t);t.append(z);
x.append(h[f].innerHTML);0<l&&t.append(a('<div class="dialogNext">&rsaquo;</div><div class="dialogPrev notactive">&lsaquo;</div>'));t.append("<span>"+h.find(".dialogModal_header")[f].innerHTML+"</span>");a("body").append(b).addClass("dialogModalOpen");""==e.type&&(b=b.outerWidth()-b[0].scrollWidth,q.css({right:b+"px"}));c=a(".dialogModal");d||(d=c.css("transitionDuration"),d=void 0!==d?1E3*d.replace("s",""):0);if(e.onLoad&&a.isFunction(e.onLoad))e.onLoad(c,f+1);h.trigger("load",{el:c,current:f+1});
c.on("destroyed",function(){if(e.onClose&&a.isFunction(e.onClose))e.onClose();h.trigger("close")});c.addClass("open");setTimeout(function(){""!=e.type&&m.css({opacity:1});q.addClass("fadeInTopBig");x.addClass("fadeInTopBig")},d+100);k();c.find(".dialogPrev").on("click",function(){0<f&&(--f,f<l&&c.find(".dialogNext").removeClass("notactive"),0===f&&c.find(".dialogPrev").addClass("notactive"),p())});c.find(".dialogNext").on("click",function(){f<l&&(++f,0<f&&c.find(".dialogPrev").removeClass("notactive"),
f==l&&c.find(".dialogNext").addClass("notactive"),p())});c.find(".close").on("click",function(){g();a(this).off("click")});a("html").on("keydown.dialogModalEvent",function(a){27==a.keyCode?g():37==a.keyCode?c.find(".dialogPrev").click():39==a.keyCode&&c.find(".dialogNext").click()})},hide:function(){g()}};if(k[b])return k[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return k.init.apply(this,arguments)};a("* [data-dialogmodal-bind]").bind("click",function(){var b=
a(this).attr("data-dialogmodal-bind"),g={};void 0!==a(this).attr("data-topoffset")&&(g.topOffset=a(this).attr("data-topoffset"));void 0!==a(this).attr("data-top")&&(g.top=a(this).attr("data-top"));void 0!==a(this).attr("data-topoffset")&&(g.type=a(this).attr("data-type"));a(b).dialogModal(g)});a.event.special.destroyed={remove:function(a){a.handler&&a.handler()}}})(jQuery);(function(a){a.fn.titleModal=function(b){a(".titleModal").off();var g={init:function(){var b,c,e=a(".titleModal");e.on("mouseenter",
function(){b=a(this);var d;if(void 0!==b.attr("title")||"ellipsis"==b.css("textOverflow")||"clip"==b.css("textOverflow")){d=void 0!==b.attr("title")?b.attr("title"):b.text();b.removeAttr("title");b.attr("data-title",d);var e=a('<div class="titleModal_container animated"></div>');c=a(".titleModal_container");var g=b.attr("data-placement");void 0===g&&(g="bottom");c&&c.remove();b.after(e.append(d));d=g;c=a(".titleModal_container");var e=b.position().left,g=b.position().top,r=b.css("marginLeft"),p=b.css("marginTop"),
f=b.outerHeight(),l=b.outerWidth(),m=c.outerWidth(),q=c.outerHeight();switch(d){case "bottom":c.css({top:g+parseInt(p)+f-5+"px",left:e+parseInt(r)+(l-m)/2+"px"}).addClass("fadeInBottom");break;case "top":c.css({top:g+parseInt(p)-q+"px",left:e+parseInt(r)+(l-m)/2+"px"}).addClass("top fadeInTop");break;case "left":c.css({top:g+parseInt(p)+f/2-q/2+"px",left:e+parseInt(r)-m-10+"px"}).addClass("left fadeInLeft");break;case "right":c.css({top:g+parseInt(p)+f/2-q/2+"px",left:e+parseInt(r)+l+10+"px"}).addClass("right fadeInRight")}}});
e.on("mouseleave",function(){b=a(this);var d;if(void 0!==b.attr("data-title")){d=b.attr("data-title");b.removeAttr("data-title");b.attr("title",d);d=c.attr("class");var e=d.replace("fadeIn","fadeOut");c.removeClass(d).addClass(e);c.remove()}})}};if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return g.init.apply(this,arguments)};a(".titleModal").titleModal();document.addEventListener("DOMNodeInserted",function(b){a(b.target).hasClass("titleModal")&&
a(".titleModal").titleModal()},!1)})(jQuery);(function(a){a.fn.confirmModal=function(b){function g(){var b=a(".confirmModal");b.removeClass("open");setTimeout(function(){b.remove();a("body").removeClass("confirmModalOpen").css({paddingRight:""});a("html.confirmModalOpen").off(".confirmModalEvent").removeClass("confirmModalOpen")},d)}var h=a(this),c,e,d,k={init:function(b){e=a.extend({topOffset:0,onOkBut:function(){return!0},onCancelBut:function(){},onLoad:function(){},onClose:function(){}},b);a("html.confirmModalOpen").off(".confirmModalEvent").removeClass("confirmModalOpen");
a(".confirmModal").remove();b=a('<div class="confirmModal" style="top:'+e.topOffset+'px"></div>');var k=a('<div class="confirmModal_body animated"></div>');b.append(k);k.append(h[0].innerHTML);a("body").append(b).addClass("confirmModalOpen");c=a(".confirmModal");d||(d=c.css("transitionDuration"),d=void 0!==d?1E3*d.replace("s",""):0);if(e.onLoad&&a.isFunction(e.onLoad))e.onLoad();c.on("destroyed",function(){if(e.onClose&&a.isFunction(e.onClose))e.onClose()});c.addClass("open");setTimeout(function(){k.addClass("fadeInTopBig");
setTimeout(function(){k.removeClass("fadeInTopBig").addClass("open")},d+100)},d+100);(function(){function b(){k.addClass("needConfirm");setTimeout(function(){k.removeClass("needConfirm")},d+100)}c.find('[data-confirmmodal-but="close"]').on("click",function(){g();a(this).off("click")});c.find('[data-confirmmodal-but="ok"]').on("click",function(b){var c;e.onOkBut&&a.isFunction(e.onOkBut)&&(c=e.onOkBut(b));!1!==c&&g();a(this).off("click")});c.find('[data-confirmmodal-but="cancel"]').on("click",function(){if(e.onCancelBut&&
a.isFunction(e.onCancelBut))e.onCancelBut();g();a(this).off("click")});c.on("click",function(c){a(c.target).parents().addBack().is(k)||b()});a("html").on("keydown.confirmModalEvent",function(a){27==a.keyCode&&b()})})()},hide:function(){g()}};if(k[b])return k[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return k.init.apply(this,arguments)};a("* [data-confirmmodal-bind]").bind("click",function(){var b=a(this).attr("data-confirmmodal-bind"),g={};void 0!==a(this).attr("data-topoffset")&&
(g.topOffset=a(this).attr("data-topoffset"));a(b).confirmModal(g)});a.event.special.destroyed={remove:function(a){a.handler&&a.handler()}}})(jQuery)});
